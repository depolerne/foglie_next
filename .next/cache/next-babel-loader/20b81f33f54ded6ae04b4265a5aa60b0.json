{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { css } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport useTranslation from \"next-translate/useTranslation\";\nimport { default as ErrorComponent } from \"next/error\";\nimport useSWR, { useSWRPages } from \"swr\";\nimport { BackgroundImage } from \"../components/BackgroundImage\";\nimport BlogList from \"../components/blog/blog-list\";\nimport Instagram from \"../components/blog/instagram\";\nimport { Container } from \"../components/container\";\nimport Layout from \"../components/layout\";\nimport { LoadMore } from \"../components/LoadMore\";\nimport { PageTitle } from \"../components/PageTitle\";\nimport { BlogService } from \"../services/blog-service\";\nimport { theme } from \"../theme/theme\";\nconst container = css`\n  width: 100%;\n  position: relative;\n`;\nconst StyledTitle = styled(PageTitle)`\n  margin-bottom: 0;\n`;\nconst blogListContainer = css`\n  margin-bottom: 104px;\n  @media (max-width: ${theme.breakpoints.md}) {\n    margin-bottom: 64px;\n  }\n`;\nconst blogList = css`\n  margin-bottom: 64px;\n  min-height: 500px;\n`;\nconst instagramContainer = css`\n  @media (max-width: ${theme.breakpoints.md}) {\n    display: none;\n  }\n`;\nconst DEFAULT_LIMIT = 6;\n\nconst Blog = () => {\n  const {\n    t,\n    lang\n  } = useTranslation();\n  const {\n    pages,\n    isLoadingMore,\n    isReachingEnd,\n    loadMore\n  } = useSWRPages(\"posts\", ({\n    offset,\n    withSWR\n  }) => {\n    const query = BlogService.getManyQuery({\n      lang,\n      skip: offset !== null && offset !== void 0 ? offset : 0,\n      take: DEFAULT_LIMIT\n    });\n    const {\n      data,\n      error\n    } = withSWR(useSWR(query, () => BlogService.getMany(query, lang)));\n    if (error) return __jsx(ErrorComponent, {\n      title: error === null || error === void 0 ? void 0 : error.message,\n      statusCode: 404\n    });\n    if (!data) return null;\n    return __jsx(BlogList, {\n      posts: data.data\n    });\n  }, (SWR, index) => {\n    if (SWR.data) {\n      if (SWR.data.total - DEFAULT_LIMIT * SWR.data.page <= 0) return null;\n    }\n\n    return (index + 1) * DEFAULT_LIMIT;\n  });\n  return __jsx(Layout, {\n    description: \"Blog page where are news and items\",\n    title: t(\"blog:title\")\n  }, __jsx(\"div\", {\n    css: container\n  }, __jsx(BackgroundImage, null, __jsx(\"source\", {\n    srcSet: \"/static/blog-bg.webp\",\n    type: \"image/webp\"\n  }), __jsx(\"source\", {\n    srcSet: \"/static/blog-bg.png\",\n    type: \"image/png\"\n  }), __jsx(\"img\", {\n    src: \"/static/blog-bg.png\",\n    alt: \"Background image\"\n  })), __jsx(Container, {\n    css: blogListContainer\n  }, __jsx(StyledTitle, {\n    subtitle: t(\"blog:subtitle\"),\n    title: t(\"blog:title\")\n  }), __jsx(\"div\", {\n    css: blogList\n  }, pages), !isReachingEnd && __jsx(LoadMore, {\n    onClick: loadMore,\n    disabled: isLoadingMore,\n    title: t(\"blog:more\")\n  })), __jsx(\"div\", {\n    css: instagramContainer\n  }, __jsx(Instagram, null))));\n};\n\nexport async function getStaticProps() {\n  return {\n    props: {}\n  };\n}\nexport default Blog;","map":null,"metadata":{},"sourceType":"module"}