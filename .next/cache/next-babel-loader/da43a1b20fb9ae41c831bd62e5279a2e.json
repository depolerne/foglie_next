{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n                      grid-area: \", \";\\n                    \"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  margin-top: 40px;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  min-height: 440px;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  padding-bottom: 104px;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-template-columns: repeat(10, 1fr);\\n  grid-template-rows: auto;\\n  grid-gap: 24px;\\n  margin-bottom: 24px;\\n  grid-template-areas:\\n    \\\"area-1 area-1 area-1 area-1 area-1 area-1 area-1 area-1 area-1 area-1\\\"\\n    \\\"area-2 area-2 area-2 area-2 area-2 area-2 area-2 area-2 area-2 area-2\\\"\\n    \\\"area-3 area-3 area-3 area-3 area-3 area-3 area-3 area-3 area-3 area-3\\\"\\n    \\\"area-4 area-4 area-4 area-4 area-4 area-4 area-4 area-4 area-4 area-4\\\"\\n    \\\"area-5 area-5 area-5 area-5 area-5 area-5 area-5 area-5 area-5 area-5\\\"\\n    \\\"area-6 area-6 area-6 area-6 area-6 area-6 area-6 area-6 area-6 area-6\\\";\\n\\n  @media (min-width: \", \") {\\n    grid-template-areas:\\n      \\\"area-1 area-1 area-1 area-1 area-2 area-2 area-2 area-2 area-2 area-2\\\"\\n      \\\"area-3 area-3 area-3 area-3 area-3 area-3 area-4 area-4 area-4 area-4\\\"\\n      \\\"area-5 area-5 area-5 area-5 area-5 area-6 area-6 area-6 area-6 area-6\\\";\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { css } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport useTranslation from \"next-translate/useTranslation\";\nimport { useRouter } from \"next/dist/client/router\";\nimport useSWR, { useSWRPages } from \"swr\";\nimport { ProjectService } from \"../../services/projectService\";\nimport { theme } from \"../../theme/theme\";\nimport { Async } from \"../Async\";\nimport { LoadMore } from \"../LoadMore\";\nimport { ProjectsListItem } from \"./projects-list-item\";\nvar Grid = styled.div(_templateObject(), theme.breakpoints.lg);\nvar Page = styled.div(_templateObject2());\nvar ListWrapper = styled.div(_templateObject3());\nvar LoadMoreWrapper = styled.div(_templateObject4());\nvar DEFAULT_LIMIT = 6;\nexport var ProjectsList = function ProjectsList() {\n  var _router$query, _router$query$categor;\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t,\n      lang = _useTranslation.lang;\n\n  var router = useRouter();\n  var selectedCategoryId = router === null || router === void 0 ? void 0 : (_router$query = router.query) === null || _router$query === void 0 ? void 0 : (_router$query$categor = _router$query.category) === null || _router$query$categor === void 0 ? void 0 : _router$query$categor.toString();\n\n  var _useSWRPages = useSWRPages(\"projects\", function (_ref) {\n    var offset = _ref.offset,\n        withSWR = _ref.withSWR;\n    var branch = withSWR(useSWR(ProjectService.getManyQuery({\n      lang: lang,\n      categoryId: selectedCategoryId,\n      skip: offset !== null && offset !== void 0 ? offset : 0,\n      take: DEFAULT_LIMIT\n    }), function (q) {\n      return ProjectService.getMany(q, lang);\n    }));\n    return __jsx(Async, {\n      branch: branch,\n      minHeight: \"1000px\",\n      renderData: function renderData(projects) {\n        return __jsx(Grid, null, projects.data.map(function (project, i) {\n          return __jsx(ProjectsListItem, {\n            key: project.id,\n            project: project,\n            css: css(_templateObject5(), \"area-\".concat(i + 1))\n          });\n        }));\n      }\n    });\n  }, function (SWR, index) {\n    if (SWR.data) {\n      if (SWR.data.total - DEFAULT_LIMIT * SWR.data.page <= 0) return null;\n    }\n\n    return (index + 1) * DEFAULT_LIMIT;\n  }, [selectedCategoryId]),\n      pages = _useSWRPages.pages,\n      isLoadingMore = _useSWRPages.isLoadingMore,\n      isReachingEnd = _useSWRPages.isReachingEnd,\n      loadMore = _useSWRPages.loadMore;\n\n  return __jsx(Page, null, __jsx(ListWrapper, null, pages), !isReachingEnd && __jsx(LoadMoreWrapper, null, __jsx(LoadMore, {\n    onClick: loadMore,\n    disabled: isLoadingMore,\n    title: t(\"portfolio:more\")\n  })));\n};","map":null,"metadata":{},"sourceType":"module"}